schema: '2.0'
stages:
  clip_forest_mask:
    cmd: python src/data/clip_forest_mask.py
    deps:
    - path: ./data/raw/sentinel-2/fca_grid_empty_raster_R20m.tif
      hash: md5
      md5: d7fb8f49333c197f99b8291e63c91c59
      size: 12774150
    - path: 
        /mnt/FS_data/geosense_data_registry/raw/masks/forest_type_2018/FTY_2018_010m_eu_03035_v010/DATA/FTY_2018_010m_eu_03035_V1_0.tif
      hash: md5
      md5: 67f7a74aad44a1e3ef0d1a8792528826
      size: 6111365885
    - path: src/data/clip_forest_mask.py
      hash: md5
      md5: 0777c4e43f935ae673add550d057e880
      size: 1470
    outs:
    - path: ./data/interim/forest_mask/FTY_2018_010m_eu_03035_V1_0_clipped.tif
      hash: md5
      md5: a264c8d81cdbd5b2d35f0126f82c54a6
      size: 5715285080
  reproject_forest_mask:
    cmd: python src/data/reproject_forest_mask.py
    deps:
    - path: ./data/interim/forest_mask/FTY_2018_010m_eu_03035_V1_0_clipped.tif
      hash: md5
      md5: 6f540ef4d80e3fdb440d74da9e1004ae
      size: 121461208
    - path: src/data/reproject_forest_mask.py
      hash: md5
      md5: 08e684daff01173574da8082dda93517
      size: 1114
    outs:
    - path: ./data/interim/forest_mask/FTY_2018_010m_eu_03035_V1_0_clipped_EPSG32632.tif
      hash: md5
      md5: dac468e1770609b81a9dfc69e73a4aee
      size: 122273754
  clip_and_binarize_forest_mask:
    cmd: python src/data/clip_binarize_forest_mask.py
    deps:
    - path: ./data/raw/sentinel-2/fca_grid_empty_raster_R20m.tif
      hash: md5
      md5: d7fb8f49333c197f99b8291e63c91c59
      size: 12774150
    - path: 
        /mnt/FS_data/geosense_data_registry/raw/masks/forest_type_2018/FTY_2018_010m_eu_03035_v010/DATA/FTY_2018_010m_eu_03035_V1_0.tif
      hash: md5
      md5: 67f7a74aad44a1e3ef0d1a8792528826
      size: 6111365885
    - path: src/data/clip_binarize_forest_mask.py
      hash: md5
      md5: 260598bb11f61c9b314210262cb85ea8
      size: 1874
    outs:
    - path: ./data/interim/forest_mask/FTY_2018_010m_eu_03035_V1_0_clipped.tif
      hash: md5
      md5: 6f540ef4d80e3fdb440d74da9e1004ae
      size: 121461208
  polygonize_forest_mask:
    cmd: python src/data/polygonize_forest_mask.py
    deps:
    - path: ./data/interim/forest_mask/FTY_2018_010m_eu_03035_V1_0_clipped_EPSG32632.tif
      hash: md5
      md5: dac468e1770609b81a9dfc69e73a4aee
      size: 122273754
    - path: src/data/polygonize_forest_mask.py
      hash: md5
      md5: 4102ad9f6d122863a0789f30efceaa76
      size: 3833
    outs:
    - path: ./data/interim/forest_mask/forest_mask.gpkg
      hash: md5
      md5: ce65136ec33b4cb4283d540dcde134f2
      size: 2208034816
  clip_gbif:
    cmd: python src/data/clip_gbif.py
    deps:
    - path: ./data/raw/sentinel-2/fca_grid_empty_raster_R20m.tif
      hash: md5
      md5: d7fb8f49333c197f99b8291e63c91c59
      size: 12774150
    - path: 
        /mnt/FS_data/geosense_data_registry/raw/gbif/all_tracheophyta_non-cult_2024-01-21/all_tracheophyta_non-cult_2024-01-21.parquet
      hash: md5
      md5: 08a894c291d8087e1223922601ad551e.dir
      size: 28197369171
      nfiles: 1482
    - path: src/data/clip_gbif.py
      hash: md5
      md5: 6693773e78a61e5fc9bfd4347f371163
      size: 2892
    outs:
    - path: ./data/interim/gbif/gbif_clipped.parquet
      hash: md5
      md5: f33d25fa69644786802376150b00297d
      size: 179811145
